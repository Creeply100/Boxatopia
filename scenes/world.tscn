[gd_scene load_steps=12 format=3 uid="uid://cjjbqjf5gfjk8"]

[ext_resource type="Shader" uid="uid://dl4bpej6tt78q" path="res://resources/Shaders/Sky1.gdshader" id="1_qfnet"]
[ext_resource type="MeshLibrary" uid="uid://4w8cc4rlx6ea" path="res://resources/block4.tres" id="2_edjms"]
[ext_resource type="PackedScene" uid="uid://l4b7gdrw4kgl" path="res://scenes/player.tscn" id="2_vynig"]
[ext_resource type="Script" uid="uid://b6xyiyvrek6d4" path="res://scripts/GridMap.gd" id="3_angvy"]
[ext_resource type="Material" uid="uid://fdrdh1a8v0r4" path="res://materials/sea.tres" id="4_6gl04"]
[ext_resource type="Material" uid="uid://nrlt8rgdnkif" path="res://materials/BarrierFloor.tres" id="5_7xppk"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oyuw6"]
shader = ExtResource("1_qfnet")
shader_parameter/sky_top_color = Color(0.385, 0.454, 0.55, 1)
shader_parameter/sky_horizon_color = Color(0.646, 0.656, 0.67, 1)
shader_parameter/sky_curve = 0.15
shader_parameter/sky_energy = 1.0
shader_parameter/sky_cover_modulate = Color(1, 1, 1, 1)
shader_parameter/ground_bottom_color = Color(0.2, 0.169, 0.133, 1)
shader_parameter/ground_horizon_color = Color(0.646, 0.656, 0.67, 1)
shader_parameter/ground_curve = 0.02
shader_parameter/ground_energy = 1.0
shader_parameter/sun_angle_max = 30.0
shader_parameter/sun_curve = 0.15

[sub_resource type="Sky" id="Sky_p57hl"]
sky_material = SubResource("ShaderMaterial_oyuw6")
radiance_size = 2

[sub_resource type="Environment" id="Environment_r0g73"]
background_mode = 2
background_color = Color(1, 1, 1, 1)
background_energy_multiplier = 1.01
sky = SubResource("Sky_p57hl")
ambient_light_color = Color(0.340339, 0.340339, 0.340339, 1)
ambient_light_sky_contribution = 0.0
reflected_light_source = 1
tonemap_mode = 2
fog_enabled = true
fog_light_color = Color(1, 1, 1, 1)
fog_light_energy = 0.64
fog_density = 0.0001
volumetric_fog_density = 0.0816
volumetric_fog_albedo = Color(0.156863, 0.8, 1, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_al0gs"]
material = ExtResource("4_6gl04")
size = Vector2(5000, 5000)

[sub_resource type="BoxShape3D" id="BoxShape3D_sj8n1"]

[node name="main" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
offset_left = -31.0
offset_top = -4.0
offset_right = 1569.0
offset_bottom = 996.0
stretch = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(1600, 1000)
render_target_update_mode = 4

[node name="world" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="SubViewportContainer/SubViewport/world"]
environment = SubResource("Environment_r0g73")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/world"]
transform = Transform3D(0.5, 0.866025, 0, -0.523598, 0.302299, 0.79653, 0.689815, -0.398265, 0.604599, 0, 0, 0)
light_energy = 0.5
shadow_enabled = true
shadow_opacity = 0.6
directional_shadow_mode = 0
directional_shadow_fade_start = 1.0
directional_shadow_max_distance = 200.0

[node name="Player" parent="SubViewportContainer/SubViewport/world" instance=ExtResource("2_vynig")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 200, 200, 200)

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/world"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 5)

[node name="GridMap" type="GridMap" parent="SubViewportContainer/SubViewport/world"]
mesh_library = ExtResource("2_edjms")
script = ExtResource("3_angvy")
metadata/_editor_floor_ = Vector3(0, -1, 0)

[node name="sea" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/world"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 21, 0)
mesh = SubResource("PlaneMesh_al0gs")
skeleton = NodePath("../../../..")

[node name="BarrierFloor" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/world"]
material_override = ExtResource("5_7xppk")
mesh = SubResource("PlaneMesh_al0gs")
skeleton = NodePath("../../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewportContainer/SubViewport/world/BarrierFloor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/world/BarrierFloor/StaticBody3D"]
transform = Transform3D(5000, 0, 0, 0, 8, 0, 0, 0, 5000, 0, -4, 0)
shape = SubResource("BoxShape3D_sj8n1")
